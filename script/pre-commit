#!/bin/sh

# This is a copy of a working git pre commit hook script

# Start of script message
echo "+++ Start of git pre commit hook +++"

# Get the root directory of the git repository dynamically
REPO_ROOT=$(git rev-parse --show-toplevel)

# Define the path to the batch script based on the repository root
BATCH_SCRIPT="$REPO_ROOT/script/run_git_pre_commit.bat"

# Check if the batch script exists
if [ -f "$BATCH_SCRIPT" ]; then
    echo "Git pre commit batch script found at $BATCH_SCRIPT"
else
    echo "ERROR. Git pre commit batch script not found at $BATCH_SCRIPT"
    exit 1
fi

# Run the batch script
"$BATCH_SCRIPT"
if [ $? -ne 0 ]; then
    echo "ERROR generated by git pre commit batch script"
    exit 1
fi

# End of script message
echo "--- End of git pre commit hook ---"

exit 0 # Success exit code
