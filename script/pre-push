#!/bin/sh

# This is a copy of a working git pre push hook script

# Start of script message
echo "+++ Start of git pre push hook +++"

# Get the root directory of the git repository dynamically
REPO_ROOT=$(git rev-parse --show-toplevel)

# Define the path to the batch script based on the repository root
BATCH_SCRIPT="$REPO_ROOT/script/run_git_pre_push_hook.bat"

# Check if the batch script exists
if [ -f "$BATCH_SCRIPT" ]; then
    echo "Git pre push hook batch script found at $BATCH_SCRIPT"
else
    echo "ERROR. Git pre push hook batch script not found at $BATCH_SCRIPT"
    exit 1
fi

# Run the batch script
"$BATCH_SCRIPT"
if [ $? -ne 0 ]; then
    echo "ERROR generated by run_git_pre_push_hook batch script"
    exit 1
fi

# End of script message
echo "--- End of git pre push hook ---"

exit 0 # Success exit code
